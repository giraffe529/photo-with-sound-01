<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>愛宕神社 - 音写真</title>


  <link rel="stylesheet" href="../style.css" />

  <link rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
  crossorigin="" />

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
  crossorigin=""></script>

</head>

<body>

  <header>
    <div class="wrap toolbar">
      <h1><a href="../index.html" style="color:inherit; text-decoration:none;">photo with sound</a></h1>
      <nav class="nav-links">
        <a href="../map.html">MAP</a>
        <a href="../index.html#about">ABOUT</a>
      </nav>
      <div class="spacer"></div>
    </div>
  </header>

  <main class="wrap"><div id="gallery" class="masonry"></div>
  
    <section class="map-section">
      <h2 class="map-title">所在地（愛宕神社：福岡県福岡市西区愛宕2丁目6-1）</h2>
      <div id="map-atago" class="leaflet-map"></div>
    </section>
    
  </main>
  

<footer>
  <small>© 2025 photo with sound</small>
</footer>

<script>

const shrineData = [
  {
    name: "愛宕神社",
    lat: 33.585623,
    lng: 130.334845,
    page: "../shrines/atago.html",
    thumb: "../atago/1.jpg"
  },
  {
    name: "宮地嶽神宮",
    lat: 33.656571,
    lng: 130.687028,
    page: "../shrines/miyajidake.html",
    thumb: "../miyajidake/1.jpg"
  },
  {
    name: "紅葉八幡宮",
    lat: 33.578379,
    lng: 130.351005,
    page: "../shrines/momiji.html",
    thumb: "../momiji/1.jpg"
  },
  {
    name: "高住神社",
    lat: 33.484366358934416,
    lng: 130.9329599722248,
    page: "../shrines/takasumi.html",
    thumb: "../takasumi/1.jpg"
  },
  {
    name: "高祖神社",
    lat: 33.544768,
    lng: 130.260464,
    page: "../shrines/takaso.html",
    thumb: "../takaso/1.jpg"
  },
  {
    name: "宗像大社",
    lat: 33.831167,
    lng: 130.514222,
    page: "../shrines/munakata.html",
    thumb: "../munakata/1.jpg"
  },
  {
    name: "太宰府天満宮",
    lat: 33.521514,
    lng: 130.534846,
    page: "../shrines/dazaifu.html",
    thumb: "../dazaifu/1.jpg"
  }
];



const items = [
  { img: "../atago/1.jpg", audio: "../audio/atago/JS1.mp3" ,caption: "福岡県福岡市西区愛宕2丁目6-1"},
  { img: "../atago/2.jpg", audio: "../audio/atago/JS3.mp3" ,caption: "福岡県福岡市西区愛宕2丁目6-1"},
  { img: "../atago/3.jpg", audio: "../audio/atago/JS5.mp3" ,caption: "福岡県福岡市西区愛宕2丁目6-1"},
  { img: "../atago/4.jpg", audio: "../audio/atago/JS1.mp3" ,caption: "福岡県福岡市西区愛宕2丁目6-1"},
  { img: "../atago/5.jpg", audio: "../audio/atago/JS2.mp3" ,caption: "福岡県福岡市西区愛宕2丁目6-1"},
  { img: "../atago/6.jpg", audio: "../audio/atago/JS6.mp3" ,caption: "福岡県福岡市西区愛宕2丁目6-1"},
  { img: "../atago/7.jpg", audio: "../audio/atago/JS7.mp3" ,caption: "福岡県福岡市西区愛宕2丁目6-1"},
  { img: "../atago/8.jpg", audio: "../audio/atago/JS6.mp3" ,caption: "福岡県福岡市西区愛宕2丁目6-1"},
  { img: "../atago/9.jpg", audio: "../audio/atago/JS3.mp3" ,caption: "福岡県福岡市西区愛宕2丁目6-1"},
  { img: "../atago/10.jpg", audio: "../audio/atago/JS2.mp3" ,caption: "福岡県福岡市西区愛宕2丁目6-1"},
  { img: "../atago/13.jpg", audio: "../audio/atago/JS1.mp3" ,caption: "福岡県福岡市西区愛宕2丁目6-1"},
  { img: "../atago/12.jpg", audio: "../audio/atago/JS6.mp3" ,caption: "福岡県福岡市西区愛宕2丁目6-1"}
  ];

  const gallery = document.getElementById("gallery");


const overlay = document.createElement("div");
overlay.className = "lightbox-overlay";
overlay.innerHTML = `
  <div class="lightbox-inner">
    <img class="lightbox-image" src="" alt="">
    <div class="lightbox-caption"></div>
  </div>
`;
document.body.appendChild(overlay);

const overlayImg = overlay.querySelector(".lightbox-image");
const overlayCaption = overlay.querySelector(".lightbox-caption");

function openLightbox(src, captionText) {
  overlayImg.src = src;
  overlayCaption.textContent = captionText || "";
  overlay.classList.add("active");
}


overlay.addEventListener("click", () => {
  overlay.classList.remove("active");
});

// ================================
// ギャラリー
// ================================
items.forEach(item => {
  const fig = document.createElement("figure");
  fig.className = "tile";

  const img = document.createElement("img");
  img.src = item.img;

  const audio = new Audio(item.audio);

  const badge = document.createElement("div");
  badge.className = "badge";

  const wave = document.createElement("div");
  wave.className = "wave";
  wave.innerHTML = "<span></span><span></span><span></span>";

  
  fig.addEventListener("mouseenter", () => {
    audio.currentTime = 0;
    audio.play();
    fig.classList.add("playing");
  });

  fig.addEventListener("mouseleave", () => {
    audio.pause();
    fig.classList.remove("playing");
  });

 
  fig.addEventListener("touchstart", () => {
    audio.currentTime = 0;
    audio.play();
    fig.classList.add("playing");
  }, { passive: true });

  fig.addEventListener("touchend", () => {
    audio.pause();
    fig.classList.remove("playing");
  });

  fig.addEventListener("touchcancel", () => {
    audio.pause();
    fig.classList.remove("playing");
  });


  fig.addEventListener("click", (e) => {
    e.preventDefault();
    openLightbox(item.img, item.caption);
  });

  fig.appendChild(img);
  fig.appendChild(badge);
  fig.appendChild(wave);
  gallery.appendChild(fig);

  img.onload = () => {
    fig.classList.add("loaded");
  };
});

// ===============================
// MINI MAP
// ===============================
document.addEventListener("DOMContentLoaded", () => {


const map = L.map("map-atago", {
  scrollWheelZoom: false,   
}).setView([33.585623, 130.334845], 13);

L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
  maxZoom: 19,
  attribution: "© OpenStreetMap"
}).addTo(map);


shrineData.forEach(shrine => {
  L.marker([shrine.lat, shrine.lng], { icon: shrineIcon })
    .addTo(map)
    .bindPopup(`
  <div class="popup-card">
    <a href="${shrine.page}" class="popup-link">
      <img src="${shrine.thumb}" class="popup-thumb" />
      <div class="popup-name">${shrine.name}</div>
    </a>
  </div>
`);

});


});


const shrineIcon = L.icon({
  iconUrl: "../icons/torii.png",  
  iconSize: [40, 40],              
  iconAnchor: [20, 38],            
  popupAnchor: [0, -32]           
});

</script>
</body>
</html>